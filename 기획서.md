# money.yeonghoon.kim — 자산 및 지출 관리 웹 애플리케이션 기획서

***

## 1. 프로젝트 개요
- 개인의 자산, 지출, 예산, 보험, 투자 정보를 효율적으로 관리하는 웹 애플리케이션 개발
- 2000년대 초반 스타일 UI/UX 적용
- 프론트엔드는 기존 Nginx에서 정적 파일로 직접 서빙
- 백엔드만 PHP-FPM + Nginx를 도커 컨테이너로 분리 운영, RESTful API 방식 사용
- 기존 서버와 포트 충돌 없이 리버스 프록시로 통합 운영

***

## 2. 주요 기능
- 자산(현금성, 저축/투자, 연금 등) 관리 (CRUD 및 논리적 삭제)
- 지출 내역 기록 및 조회
- 예산 편성 및 실제 지출과 비교 분석
- 보험 및 고정 지출 관리
- 로그인 기능 (단일 사용자, 환경변수 기반 인증)
- 로그인 성공 시 텔레그램 알림 웹훅 전송

***

## 3. 기술 스택 및 환경

### 프론트엔드
- HTML, CSS, jQuery 기반 전통적 UI
- 기존 Nginx에서 정적 파일 직접 제공

### 백엔드
- PHP API 서버 (CodeIgniter 또는 순수 PHP 선택 가능)
- MySQL 데이터베이스
- PHP-FPM + Nginx 조합 도커 컨테이너 내 운영
- 도커 컴포즈로 PHP, Nginx, MySQL 컨테이너 관리

### 환경 변수 및 비밀 정보 관리
- `.env` 파일로 DB 정보, 텔레그램 봇 토큰, 암호화 키 등 민감 정보 관리
- PHP에서 `getenv()` 함수로 환경 변수 읽어 사용
- 로그인 정보 가능 시 해시(PHP password_hash 또는 SHA-512) 또는 대칭키 AES 암호화 활용
- AES-256-CBC 대칭키는 `.env`에 256비트(32바이트) 16진수 문자열로 저장

***

## 4. 인프라 및 배포 구성

### 서비스 구성
- 기존 서버 Nginx 80, 443 포트 유지
- `/` 경로: 프론트엔드 정적 파일 직접 서빙
- `/api/` 경로: 기존 Nginx → 도커 내 PHP API 컨테이너 리버스 프록시

### 데이터베이스 관리
- 개발 환경: MySQL 컨테이너 도커 내 실행
- 운영 환경: 외부 별도 DB 서버 접근
- `.env`와 `docker-compose.yml`에서 MySQL 사용 여부, 접속 정보 관리해 환경별 유연성 보장
- 미사용 시 MySQL 컨테이너 정지하여 자원 낭비 회피

### 폴더 구조

```
/project-root
│
├── backend/                  # PHP API 서버 소스 (도커 컨테이너 내 서비스)
│   ├── api/
│   ├── config/
│   ├── lib/
│   ├── models/
│   ├── controllers/
│   └── index.php
│
├── frontend/                 # 정적 웹 자산 (HTML, CSS, JS)
│   ├── css/
│   ├── js/
│   ├── img/
│   └── index.html
│
├── docker/                   # 도커 이미지 및 컴포즈 설정
│   ├── backend.Dockerfile
│   └── docker-compose.yml
│
├── logs/                     # (선택) 로그 저장
│
└── .env                      # 환경변수 및 민감 정보
```

***

## 5. 로그인 및 보안

- 로그인 정보는 `.env`에 저장하며, 해시 또는 대칭키 암호화 활용
- SHA-512 해시 검증 방식: 원본 복호화 불가, 입력값 해시 비교
- 대칭키 암호화 시 PHP OpenSSL로 AES-256-CBC 사용, 키와 초기화 벡터 관리 철저
- 로그인 성공 시 PHP에서 `.env` 내 텔레그램 봇 토큰과 챗ID 이용해 웹훅 알림 전송

***

## 6. 향후 확장 및 운영

- 사용자 인증 및 권한 체계 강화 가능
- 프론트엔드 현대적 프레임워크 마이그레이션 계획 가능
- 보안 강화, API 테스트 및 자동화 구축
- 변경과 확장 시 .env 기반 설정 관리 편의성 유리
- 백업, 로그 관리 체계적 운영

***

이 기획서는 첨부된 엑셀 자산관리 데이터 구조와 운영 환경 영향을 반영하였으며, 현 요구사항에 최적화된 실용적이고 확장 가능한 아키텍처를 제안합니다. 자세한 API 명세와 배포 가이드 필요 시 추가 제공 가능합니다.